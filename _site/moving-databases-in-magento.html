<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"/><title>Moving databases in Magento</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content=""/><meta name="keywords" content="revelstoke,"/><link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico"/><link href="/css/bootstrap.min.css" rel="stylesheet"><link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet"><link href="//netdna.bootstrapcdn.com/font-awesome/3.1.1/css/font-awesome.css" rel="stylesheet"><link href="//netdna.bootstrapcdn.com/font-awesome/3.1.1/css/font-awesome-ie7.css" rel="stylesheet"><link href="/css/app.css" rel="stylesheet" type="text/css"/></head><body><div class="container"><div class="row"><div class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container"> <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a> <a class="brand" href="/">Monashee Mountain Multimedia</a><div class="nav-collapse" id="main-menu"><ul class="nav" id="main-menu-left"><li> <a href="/projects.html">Projects</a></li><li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">Blog <b class="caret"></b></a><ul class="dropdown-menu" id="swatch-menu"><li><a href="/how-you-get-hacked-at-a-coffee-shop.html">How you get hacked in a coffee shop</a></li><li><a href="/social-media-marketing-report.html">Social Media Marketing Report</a></li><li><a href="/rave-reviews.html">Rave Review for your Business</a></li><li><a href="/social-networking-bill-of-rights.html">Social Networking Bill of Rights</a></li><li><a href="/facebook-business-page-cheat-sheet.html">Facebook Business Page Cheat Sheet</a></li><li><a href="/inbound-marketing-process.html">Inbound Marketing Process</a></li><li><a href="/the-history-of-marketing.html">The History of Marketing</a></li><li><a href="/use-of-mobile-devices.html">Use of Mobile Devices</a></li><li><a href="/how-linkedin-works.html">How LinkedIn Works</a></li><li><a href="/web-developer-awards.html">Web Developer Awards</a></li><li><a href="/wordpress-to-jekyll.html">WordPress to Jekyll</a></li><li><a href="/the-modern-website.html">The Modern Website</a></li><li><a href="/how-to-add-htop-to-a-centos-and-ubuntu-server.html">How to Add htop</a></li><li><a href="/speed-matters.html">Speed Matters</a></li><li><a href="/crowdsourcing.html">Crowdsourcing</a></li><li><a href="/fastcgi-data-timeout-error.html">Fastcgi data timeout error</a></li><li><a href="/moving-databases-in-magento.html">Moving databases in Magento</a></li><li><a href="/super-lightweight-code-editing-from-adobe.html">Adobe Brackets</a></li><li><a href="/updated-server-software.html">Updated Server Software</a></li><li><a href="/revelstoke-web-hosting.html">Revelstoke Web Hosting</a></li><li><a href="/adobe-3-2.html">Adobe 3.2</a></li><li><a href="/real-time-trending-twitter-and-google-maps.html">Real time Twitter</a></li><li><a href="/browser-distribution-is-changing.html">Browser Distribution</a></li></ul></li><li> <a id="swatch-link" href="/contact.html">Contact</a></li></ul></div></div></div></div><div class="document span9"><div id="post"><h1>Moving databases in Magento</h1><p class="date"><em>Posted: August 31, 2012</em></p><p>Following best practices of developing on a local development server then pushing your code to a live server, Magento ecommerce platform requires a few steps to prepare your database for an error-free smooth transition between domains.</p><p>First. using your favorite code editor open your exported SQL file and search and replace your domain. If you have different <code>and</code></p><p>then you will have to search and replace twice.</p><p>Second, involves adding some SQL statements at the beginning of the file and at the end.</p><p>At the top of the file add:</p><pre><code>SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT;
SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS;
SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION;
SET NAMES utf8;
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO';
SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0;</code></pre><p>And at the end of the file add:</p><pre><code>SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT;
SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS;
SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION;
SET SQL_NOTES=@OLD_SQL_NOTES;</code></pre><p>Lastly, gzip your sql file. Then create a database using some sort of versioning to help distinguish the different Magento databases and import your <code>new-database-2012-09-01.sql.gz</code> into your database.</p><p>Open <strong>/app/etc/local.xml</strong> and change the dbname to your new database. These steps need to be done going either way — development to live server — or more common live to development server.</p></div></div><div class="span3"><div class="well sidebar"><h3>Latest Posts</h3><ul><li><a href="/how-you-get-hacked-at-a-coffee-shop.html">How you get hacked in a coffee shop</a></li><li><a href="/social-media-marketing-report.html">Social Media Marketing Report</a></li><li><a href="/rave-reviews.html">Rave Review for your Business</a></li><li><a href="/social-networking-bill-of-rights.html">Social Networking Bill of Rights</a></li><li><a href="/facebook-business-page-cheat-sheet.html">Facebook Business Page Cheat Sheet</a></li><li><a href="/inbound-marketing-process.html">Inbound Marketing Process</a></li><li><a href="/the-history-of-marketing.html">The History of Marketing</a></li><li><a href="/use-of-mobile-devices.html">Use of Mobile Devices</a></li><li><a href="/how-linkedin-works.html">How LinkedIn Works</a></li><li><a href="/web-developer-awards.html">Web Developer Awards</a></li><li><a href="/wordpress-to-jekyll.html">WordPress to Jekyll</a></li><li><a href="/the-modern-website.html">The Modern Website</a></li><li><a href="/how-to-add-htop-to-a-centos-and-ubuntu-server.html">How to Add htop</a></li><li><a href="/speed-matters.html">Speed Matters</a></li><li><a href="/crowdsourcing.html">Crowdsourcing</a></li><li><a href="/fastcgi-data-timeout-error.html">Fastcgi data timeout error</a></li></ul></div></div></div></div> <footer><div class="container"><div class="copyright"> © 2006-2013 Monashee Mountain Multimedia. All rights reserved.</div></div> </footer> <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script><script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script><script src="/js/app.js"></script><script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-21996750-10"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></body></html>